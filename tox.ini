# content of: tox.ini , put in same dir as setup.py
[tox]
envlist = clean,py36,report,flake8

[testenv]
# install pytest in the virtualenv where commands will be executed
deps = 
    -rrequirements.txt 
    pytest
    pytest-cov
    freezegun
commands =
    # NOTE: you can run any command line tool here - not just tests
    python3 -m pytest --cov=lambda/py tests

[testenv:report]
deps = coverage
skip_install = true
commands =
    coverage report
    coverage html

# Linters
[testenv:flake8]
basepython = python3
skip_install = true
deps =
    flake8
    flake8-colors
    flake8-docstrings>=1.3.1
    flake8-import-order>=0.9
    flake8-typing-imports>=1.1
    pep8-naming
commands =
    flake8 lambda/py/ --exclude=lambda_upload --exit-zero

[testenv:clean]
deps = coverage
skip_install = true
commands = coverage erase